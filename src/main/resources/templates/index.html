<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PanAfricanMail - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .job-card {
            border-left: 4px solid #3b82f6;
        }
        
        .story-card {
            border-left: 4px solid #f97316;
        }
        
        .btn-primary {
            background-color: #3b82f6;
        }
        
        .btn-secondary {
            background-color: #f97316;
        }
        
        .tab-active {
            border-bottom: 3px solid #3b82f6;
            color: #3b82f6;
            font-weight: 600;
        }
        
        .feed-container {
            min-height: 500px;
        }
        
        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }
        
        .form-container {
            max-width: 800px;
        }
        
        .admin-dashboard {
            min-height: 600px;
        }
        
        .page-transition {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }</style>
</head>
<body>
<nav class="bg-white shadow-md py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="javascript:void(0)" class="navbar-brand flex items-center text-blue-600" onclick="showPage('home')">
                <i class="fa-solid fa-briefcase-medical mr-2"></i>
                <span>PanAfrican<span class="text-orange-500">Mail</span></span>
            </a>
            
            <div class="flex items-center space-x-6">
                <a href="/" class="text-gray-700 hover:text-blue-600 transition" onclick="showPage('home')">
                    <i class="fa-solid fa-home mr-1"></i> Home
                </a>
                <a href="/create-post" class="text-gray-700 hover:text-blue-600 transition" onclick="showPage('create-post')">
                    <i class="fa-solid fa-plus mr-1"></i> Create Post
                </a>
                <div id="admin-nav-item" class="hidden">
                    <a href="/admin" class="text-gray-700 hover:text-blue-600 transition" onclick="showPage('admin')">
                        <i class="fa-solid fa-shield mr-1"></i> Admin
                    </a>
                </div>
                
                <!-- User not logged in -->
                <div id="auth-buttons" class="flex items-center space-x-2">
                    <button class="px-4 py-2 text-sm font-medium text-blue-600 border border-blue-600 rounded-md hover:bg-blue-50 transition" onclick="window.location.href='/login'">
                        Log In
                    </button>
                    <button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition" onclick="window.location.href='/signup'">
                        Sign Up
                    </button>
                </div>
                
                <!-- User logged in -->
                <div id="user-menu" class="hidden">
                    <div class="relative">
                        <button id="user-menu-button" class="flex items-center text-gray-700 hover:text-blue-600 transition">
                            <img class="h-8 w-8 rounded-full mr-1" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="User profile">
                            <span id="user-name">User</span>
                            <i class="fa-solid fa-caret-down ml-1"></i>
                        </button>
                        <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <a href="javascript:void(0)" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                            <a href="javascript:void(0)" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">My Posts</a>
                            <a href="javascript:void(0)" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" onclick="logout()">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
<div class="container mx-auto px-4 py-8">
<div id="home-page" class="page-transition">
            <div class="flex flex-col md:flex-row justify-between items-start mb-8">
                <div class="md:w-1/2 pr-0 md:pr-4 mb-6 md:mb-0">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-blue-600">Latest Job Posts</h2>
                            <a href="javascript:void(0)" class="text-blue-600 hover:underline">View All</a>
                        </div>
                        
                        <div id="job-feed" class="feed-container space-y-4">
                            <!-- Job cards will be loaded here -->
                            <div class="job-card card bg-white border rounded-lg p-4 shadow-sm">
                                <h3 class="font-semibold text-lg">Senior Software Engineer</h3>
                                <div class="text-gray-500 text-sm mb-2">TechCorp • San Francisco, CA</div>
                                <p class="text-gray-700 mb-3">We're seeking an experienced software engineer to lead development of our core product...</p>
                                <div class="flex justify-between items-center">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">Engineering</span>
                                    <span class="text-green-600 font-medium">$120K - $150K</span>
                                </div>
                            </div>
                            
                            <div class="job-card card bg-white border rounded-lg p-4 shadow-sm">
                                <h3 class="font-semibold text-lg">UX/UI Designer</h3>
                                <div class="text-gray-500 text-sm mb-2">DesignHub • Remote</div>
                                <p class="text-gray-700 mb-3">Join our creative team to design beautiful and intuitive user interfaces for our clients...</p>
                                <div class="flex justify-between items-center">
                                    <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">Design</span>
                                    <span class="text-green-600 font-medium">$90K - $110K</span>
                                </div>
                            </div>
                            
                            <div class="job-card card bg-white border rounded-lg p-4 shadow-sm">
                                <h3 class="font-semibold text-lg">Marketing Specialist</h3>
                                <div class="text-gray-500 text-sm mb-2">GrowthCo • New York, NY</div>
                                <p class="text-gray-700 mb-3">Help us grow our digital presence with innovative marketing campaigns...</p>
                                <div class="flex justify-between items-center">
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Marketing</span>
                                    <span class="text-green-600 font-medium">$70K - $90K</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button class="px-4 py-2 bg-blue-100 text-blue-600 rounded-md hover:bg-blue-200 transition">
                                Load More <i class="fa-solid fa-arrow-down ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="md:w-1/2 pl-0 md:pl-4">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-orange-500">Latest Stories</h2>
                            <a href="javascript:void(0)" class="text-orange-500 hover:underline">View All</a>
                        </div>
                        
                        <div id="story-feed" class="feed-container space-y-4">
                            <!-- Story cards will be loaded here -->
                            <div class="story-card card bg-white border rounded-lg p-4 shadow-sm">
                                <h3 class="font-semibold text-lg">My Journey to Becoming a Developer</h3>
                                <div class="text-gray-500 text-sm mb-2">By Sarah Johnson • 2 days ago</div>
                                <p class="text-gray-700">I spent years working in retail before deciding to make a career change. The journey wasn't easy, but after months of self-teaching and a bootcamp...</p>
                                <div class="mt-3">
                                    <a href="javascript:void(0)" class="text-orange-500 hover:underline">Read more</a>
                                </div>
                            </div>
                            
                            <div class="story-card card bg-white border rounded-lg p-4 shadow-sm">
                                <h3 class="font-semibold text-lg">How I Got My Dream Job at Google</h3>
                                <div class="text-gray-500 text-sm mb-2">By Anonymous • 1 week ago</div>
                                <p class="text-gray-700">After three failed interviews at major tech companies, I decided to change my approach. Here's what I did differently to finally succeed...</p>
                                <div class="mt-3">
                                    <a href="javascript:void(0)" class="text-orange-500 hover:underline">Read more</a>
                                </div>
                            </div>
                            
                            <div class="story-card card bg-white border rounded-lg p-4 shadow-sm">
                                <h3 class="font-semibold text-lg">Switching Careers at 40: My Experience</h3>
                                <div class="text-gray-500 text-sm mb-2">By Michael Chen • 3 weeks ago</div>
                                <p class="text-gray-700">Many people told me it was too late to switch to tech at my age. Here's how I proved them wrong and found success...</p>
                                <div class="mt-3">
                                    <a href="javascript:void(0)" class="text-orange-500 hover:underline">Read more</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <button class="px-4 py-2 bg-orange-100 text-orange-500 rounded-md hover:bg-orange-200 transition">
                                Load More <i class="fa-solid fa-arrow-down ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
<footer class="bg-gray-800 text-white py-8 mt-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-wrap justify-between">
                <div class="w-full md:w-1/3 mb-6 md:mb-0">
                    <h3 class="text-xl font-bold mb-4">PanAfricanMail</h3>
                    <p class="text-gray-300">Connecting job seekers with opportunities and sharing inspiring career stories.</p>
                </div>
                
                <div class="w-full md:w-1/3 mb-6 md:mb-0">
                    <h3 class="text-lg font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">About Us</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">Contact</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">Privacy Policy</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div class="w-full md:w-1/3">
                    <h3 class="text-lg font-bold mb-4">Connect With Us</h3>
                    <div class="flex space-x-4">
                        <a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">
                            <i class="fab fa-facebook-f text-xl"></i>
                        </a>
                        <a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">
                            <i class="fab fa-linkedin-in text-xl"></i>
                        </a>
                        <a href="javascript:void(0)" class="text-gray-300 hover:text-white transition">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <hr class="border-gray-700 my-6">
            
            <div class="text-center text-gray-400">
                <p>&copy; 2025 PanAfricanMail. All rights reserved.</p>
            </div>
        </div>
    </footer>
<script>// Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('[id$="-page"]').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show the requested page
            document.getElementById(pageId + '-page').classList.remove('hidden');
        }
        
        // Post tab switching
        function switchPostTab(tab) {
            if (tab === 'job') {
                document.getElementById('job-tab-btn').classList.add('tab-active');
                document.getElementById('story-tab-btn').classList.remove('tab-active');
                document.getElementById('job-post-form').classList.remove('hidden');
                document.getElementById('story-post-form').classList.add('hidden');
            } else {
                document.getElementById('job-tab-btn').classList.remove('tab-active');
                document.getElementById('story-tab-btn').classList.add('tab-active');
                document.getElementById('job-post-form').classList.add('hidden');
                document.getElementById('story-post-form').classList.remove('hidden');
            }
        }
        
        // Admin dashboard tab switching
        document.querySelectorAll('.admin-tab-btn').forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                    btn.classList.remove('tab-active');
                });
                
                // Add active class to clicked tab
                this.classList.add('tab-active');
                
                // Hide all content tabs
                document.querySelectorAll('.admin-content-tab').forEach(tab => {
                    tab.classList.add('hidden');
                });
                
                // Show the selected content tab
                document.getElementById(this.getAttribute('data-tab') + '-tab').classList.remove('hidden');
            });
        });
        
        // User dropdown toggle
        document.getElementById('user-menu-button')?.addEventListener('click', function() {
            document.getElementById('user-dropdown').classList.toggle('hidden');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('user-menu');
            const userDropdown = document.getElementById('user-dropdown');
            const userMenuButton = document.getElementById('user-menu-button');
            
            if (userMenu && userDropdown && userMenuButton) {
                if (!userMenu.contains(event.target)) {
                    userDropdown.classList.add('hidden');
                }
            }
        });
        
        // Form submissions
        document.getElementById('job-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            // This would normally send data to an API
            Swal.fire({
                title: 'Success!',
                text: 'Job post created successfully',
                icon: 'success',
                confirmButtonColor: '#3b82f6'
            }).then(() => {
                showPage('home');
            });
        });
        
        
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Start on home page
            showPage('home');
        });</script>

        <script>
    // Fetch current user and update nav bar
    function checkAuthStatus() {
        fetch('/api/current-user')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Not logged in');
                }
                return response.json();
            })
            .then(user => {
                document.getElementById('login-link').style.display = 'none';
                document.getElementById('signup-link').style.display = 'none';

                document.getElementById('user-email').textContent = user.email;
                document.getElementById('user-info').classList.remove('hidden');
            })
            .catch(() => {
                document.getElementById('login-link').style.display = 'inline-block';
                document.getElementById('signup-link').style.display = 'inline-block';
                document.getElementById('user-info').classList.add('hidden');
            });
    }

    // Handle logout
    document.addEventListener('DOMContentLoaded', function () {
        checkAuthStatus();

        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function () {
                fetch('/api/logout')
                    .then(() => {
                        checkAuthStatus();
                        window.location.href = '/'; // Optional: redirect to home
                    });
            });
        }
    });
</script>

</body>
</html>